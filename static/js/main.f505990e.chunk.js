(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{103:function(e,t,n){},124:function(e,t,n){"use strict";n.r(t);var a=n(0),r=n.n(a),c=n(14),u=n.n(c),o=n(45),s=n(11),i=n(27),l=n(41),p={REQUEST:"SIGN_OUT_REQUEST",SUCCESS:"SIGN_OUT_SUCCESS"},b={REQUEST:"SIGN_IN_REQUEST",SUCCESS:"SIGN_IN_SUCCESS",FAILURE:"SIGN_IN_FAILURE",CANCEL:"IGN_IN_CANCEL"},d={status:null,isAuthenticated:!1,username:null,password:null,showSignInForm:!1,errText:null},m=Object(s.c)({auth:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:d,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case b.REQUEST:return Object(l.a)({},e,{status:"request"});case b.SUCCESS:return Object(l.a)({},e,{status:"success",isAuthenticated:!0});case b.FAILURE:return Object(l.a)({},e,{errText:t.text,status:"failure"});case b.CANCEL:return Object(l.a)({},e,{status:"cancel"});case p.REQUEST:return Object(l.a)({},e);case p.SUCCESS:return Object(l.a)({},e,{isAuthenticated:!1});default:return e}}}),E=(n(98),n(21)),f=n(25),h=n(28),O=n(26),j=n(29),v=n(37),S=function(e){function t(){return Object(E.a)(this,t),Object(h.a)(this,Object(O.a)(t).apply(this,arguments))}return Object(j.a)(t,e),Object(f.a)(t,[{key:"render",value:function(){return r.a.createElement("div",null,"public")}}]),t}(r.a.Component),w=function(e){function t(){return Object(E.a)(this,t),Object(h.a)(this,Object(O.a)(t).apply(this,arguments))}return Object(j.a)(t,e),Object(f.a)(t,[{key:"render",value:function(){return r.a.createElement("div",null,"protected")}}]),t}(r.a.Component),x=n(13),g=n.n(x),y=n(74),C=n(80),k=n(50),U=n(151),I=n(52),A=n(51);function N(){return{type:p.REQUEST}}function T(e){return{type:b.REQUEST,payload:e}}function R(){return{type:b.CANCEL}}var _=n(146),L=n(152),Q=n(149),F=n(148),P=n(153),G=n(150),q=n(147),B=n(77),X=n.n(B);function J(){var e=Object(k.a)(["\n  display: block;\n  color: #db3d44;\n  font-size: 12px;\n  position: absolute;\n"]);return J=function(){return e},e}function W(){var e=Object(k.a)(["\n  display: inline-block;\n  width: 80%;\n  padding: 5px 12px;\n  font-size: 13px;\n  color: #222222;\n  background-color: #ffffff;\n  background-image: none;\n  border: 1px solid #cccccc;\n  border-radius: 3px;\n"]);return W=function(){return e},e}function z(){var e=Object(k.a)(["\n  margin-bottom: 18px;\n"]);return z=function(){return e},e}var Y=A.a.div(z()),$=A.a.input(W()),D=A.a.div(J()),H=Object(U.a)({button:{backgroundColor:"grey",color:"#f2f2f2"},progress:{width:"24px",height:"24px"},closeButton:{position:"absolute",right:"7px",top:"7px"}}),K=Object(s.d)(Object(i.b)(function(e){return{status:e.auth.status,errText:e.auth.errText}},function(e){return Object(s.b)({signIn:T,cancelSignIn:R},e)}))(function(e){var t=H(),n=r.a.useState(!1),a=Object(C.a)(n,2),c=a[0],u=a[1];function o(){u(!1),"request"===e.status&&e.cancelSignIn()}function s(){return(s=Object(y.a)(g.a.mark(function t(n){return g.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:e.signIn({username:n.username,password:n.password,history:e.history});case 1:case"end":return t.stop()}},t)}))).apply(this,arguments)}var i=function(e){return e?void 0:"This is a required field"};return r.a.createElement("div",null,r.a.createElement(_.a,{className:t.button,onClick:function(){u(!0)}},"Sign In"),r.a.createElement(L.a,{open:c,"aria-labelledby":"dialog-title",onClose:o},r.a.createElement(P.a,{id:"dialog-title"},"Sign In",r.a.createElement(q.a,{className:t.closeButton,onClick:o},r.a.createElement(X.a,null))),r.a.createElement(I.b,{onSubmit:function(e){return s.apply(this,arguments)},render:function(n){var a=n.handleSubmit,c=n.submitting;return n.values,r.a.createElement("form",{onSubmit:a},r.a.createElement(F.a,null,r.a.createElement(I.a,{name:"username",validate:i},function(e){var t=e.input,n=e.meta;return r.a.createElement("div",null,r.a.createElement(Y,null,r.a.createElement("label",null,"Username"),r.a.createElement($,Object.assign({},t,{type:"text",placeholder:"Enter Username"})),r.a.createElement(D,null,n.error&&n.touched&&r.a.createElement("span",null,n.error))))}),r.a.createElement(I.a,{name:"password",validate:i},function(e){var t=e.input,n=e.meta;return r.a.createElement("div",null,r.a.createElement(Y,null,r.a.createElement("label",null,"Password"),r.a.createElement($,Object.assign({},t,{type:"text",placeholder:"Enter Password"})),r.a.createElement(D,null,n.error&&n.touched&&r.a.createElement("span",null,n.error))))}),r.a.createElement(D,null,"failure"===e.status?e.errText:"")),r.a.createElement(Q.a,null,r.a.createElement(_.a,{onClick:o,color:"secondary"},"Cancel"),r.a.createElement(_.a,{type:"submit",color:"primary",disabled:c},"request"===e.status?r.a.createElement(G.a,{className:t.progress}):"Sign In")))}})))}),M=function(e){function t(){return Object(E.a)(this,t),Object(h.a)(this,Object(O.a)(t).apply(this,arguments))}return Object(j.a)(t,e),Object(f.a)(t,[{key:"render",value:function(){return r.a.createElement("div",null,r.a.createElement(K,{open:this.props.showSignInForm,history:this.props.history}))}}]),t}(r.a.Component),V=Object(s.d)(Object(i.b)(function(e){return{}},function(e){return{}}))(M),Z=function(e){function t(){return Object(E.a)(this,t),Object(h.a)(this,Object(O.a)(t).apply(this,arguments))}return Object(j.a)(t,e),Object(f.a)(t,[{key:"render",value:function(){var e=this;return this.props.isAuthenticated?r.a.createElement("p",null,"Welcome!"," ",r.a.createElement("button",{onClick:function(){e.props.signOut()}},"Sign out")):r.a.createElement("p",null,"You are not logged in.")}}]),t}(r.a.Component),ee=Object(s.d)(Object(i.b)(function(e){return{isAuthenticated:e.auth.isAuthenticated}},function(e){return Object(s.b)({signOut:N},e)}))(Z),te=function(e){function t(){return Object(E.a)(this,t),Object(h.a)(this,Object(O.a)(t).apply(this,arguments))}return Object(j.a)(t,e),Object(f.a)(t,[{key:"render",value:function(){var e=this;return r.a.createElement(o.a,{basename:"/wistron-frontend-homework"},r.a.createElement("div",{style:{padding:"20px"}},r.a.createElement(ee,null),r.a.createElement("ul",null,r.a.createElement("li",null,r.a.createElement(o.b,{to:"/public"},"Public Page")),r.a.createElement("li",null,r.a.createElement(o.b,{to:"/protected"},"Protected Page"))),r.a.createElement("hr",null),r.a.createElement(v.b,{exact:!0,path:"/"}),r.a.createElement(v.b,{path:"/public",component:S}),r.a.createElement(v.b,{path:"/protected",render:function(){return e.props.isAuthenticated?r.a.createElement(w,null):r.a.createElement(v.a,{to:"/signin"})}}),r.a.createElement(v.b,{path:"/signin",component:V})))}}]),t}(r.a.Component),ne=Object(s.d)(Object(i.b)(function(e){return{isAuthenticated:e.auth.isAuthenticated}},function(e){return{}}))(te);Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));var ae=n(55),re=(n(103),n(18)),ce=n(48),ue=n.n(ce),oe=ue.a.create({baseURL:"/api",responseType:"json",timeout:3e4}),se=n(79),ie=n.n(se),le=g.a.mark(pe);function pe(e){var t,n;return g.a.wrap(function(a){for(;;)switch(a.prev=a.next){case 0:return t=e.username,n=e.password,a.next=3,oe({url:"/login",method:"post",data:{username:t,password:n}});case 3:return a.abrupt("return",a.sent);case 4:case"end":return a.stop()}},le)}new ie.a(oe,{delayResponse:3e3}).onPost("/api/login").reply(function(e){var t=JSON.parse(e.data),n=t.username,a=t.password;return"guest"===n&&"guest"===a?[200,{token:"XXXX"}]:[401,{text:"Incorrect username or password"}]});var be=g.a.mark(Oe),de=g.a.mark(je),me=g.a.mark(ve),Ee=g.a.mark(Se),fe=g.a.mark(we),he=g.a.mark(xe);function Oe(){return g.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(re.a)([Object(re.b)(je),Object(re.b)(ve)]);case 2:case"end":return e.stop()}},be)}function je(){return g.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(re.g)(b.REQUEST,we);case 2:case"end":return e.stop()}},de)}function ve(){return g.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(re.g)(p.REQUEST,xe);case 2:case"end":return e.stop()}},me)}function Se(e){var t,n,a;return g.a.wrap(function(r){for(;;)switch(r.prev=r.next){case 0:return t=e.username,n=e.password,a=e.history,r.prev=1,r.next=4,Object(re.b)(pe,{username:t,password:n});case 4:return r.sent,r.next=7,Object(re.e)({type:b.SUCCESS});case 7:return r.next=9,a.push("/protected");case 9:r.next=20;break;case 11:if(r.prev=11,r.t0=r.catch(1),!r.t0.response||!r.t0.response.data){r.next=18;break}return r.next=16,Object(re.e)({type:b.FAILURE,text:r.t0.response.data.text});case 16:r.next=20;break;case 18:return r.next=20,Object(re.e)({type:b.FAILURE});case 20:case"end":return r.stop()}},Ee,null,[[1,11]])}function we(e){var t,n;return g.a.wrap(function(a){for(;;)switch(a.prev=a.next){case 0:return t=e.payload,a.next=3,Object(re.d)(Se,{username:t.username,password:t.password,history:t.history});case 3:return n=a.sent,a.next=6,Object(re.f)(b.CANCEL);case 6:return a.next=8,Object(re.c)(n);case 8:case"end":return a.stop()}},fe)}function xe(){return g.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(re.e)({type:p.SUCCESS});case 2:case"end":return e.stop()}},he)}var ge=Object(ae.a)(),ye=Object(s.a)(ge),Ce=Object(s.e)(m,Object(s.d)(ye));ge.run(Oe),u.a.render(r.a.createElement(i.a,{store:Ce},r.a.createElement(o.a,null,r.a.createElement(ne,null))),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then(function(e){e.unregister()})},89:function(e,t,n){e.exports=n(124)},98:function(e,t,n){}},[[89,1,2]]]);
//# sourceMappingURL=main.f505990e.chunk.js.map